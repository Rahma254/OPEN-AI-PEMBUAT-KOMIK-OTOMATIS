<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nabila Ahmad - Grand Creative Studio V9 (Responsive Pro)</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    
    <!-- Library untuk PDF akan di-load oleh JS jika dibutuhkan -->

    <style>
        :root {
            --bg-deep-space: #10101a; --surface-primary: #191924; --surface-secondary: #242433;
            --border-color: #3a3a52; --text-primary: #f0f0f5; --text-secondary: #a0a0b8;
            --accent-primary: #00aaff; --accent-secondary: #ff00aa; --accent-tertiary: #aaff00;
            --font-ui: 'Poppins', sans-serif; --font-header: 'Playfair Display', serif;
            --card-shadow: 0 4px 12px rgba(0,0,0,0.2);
            --focus-ring: 0 0 0 3px rgba(0, 170, 255, 0.5);
        }
        
        /* === RESET & DASAR === */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body { 
            font-family: var(--font-ui); 
            background: var(--bg-deep-space); 
            color: var(--text-primary); 
            line-height: 1.7; 
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* === CONTAINER & LAYOUT UTAMA === */
        .studio-container { 
            max-width: 1200px; /* Lebar maksimal di desktop */
            margin: 0 auto; 
            padding: 1rem; 
            padding-top: 4rem; /* Jarak dari atas */
        }
        
        .studio-header h1 { 
            font-family: var(--font-header); 
            font-size: 2.5rem; /* Ukuran font lebih adaptif */
            text-align: center;
            letter-spacing: 1px; 
            background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary), var(--accent-tertiary)); 
            -webkit-background-clip: text; 
            -webkit-text-fill-color: transparent;
            margin-bottom: 0.5rem;
        }
        .studio-header p {
            text-align: center;
            color: var(--text-secondary);
            margin-bottom: 2rem;
        }

        /* === KOMPONEN UI INTERAKTIF === */
        .card { 
            background: rgba(26, 26, 36, 0.8); 
            backdrop-filter: blur(10px); 
            border-radius: 16px; 
            padding: 1.5rem; 
            border: 1px solid var(--border-color); 
            transition: all 0.3s ease; 
            box-shadow: var(--card-shadow);
        }
        .card h3 {
            font-family: var(--font-header);
            color: var(--accent-primary);
            margin-bottom: 1rem;
            font-size: 1.25rem;
        }
        
        input[type="text"], input[type="password"], textarea, select {
            width: 100%;
            padding: 0.75rem;
            background: var(--surface-primary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-primary);
            font-family: var(--font-ui);
            margin-bottom: 1rem;
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: var(--accent-primary);
            box-shadow: var(--focus-ring);
        }
        textarea { resize: vertical; min-height: 80px; }

        .main-action-button {
            width: 100%;
            padding: 0.8rem 1.5rem;
            background: var(--accent-primary);
            color: #fff;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            font-family: var(--font-ui);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }
        .main-action-button:hover:not(:disabled) { 
            transform: translateY(-3px); 
            box-shadow: 0 0 20px rgba(0, 170, 255, 0.6); 
            background: #00bfff;
        }
        .main-action-button:disabled {
            background-color: #555;
            cursor: not-allowed;
            opacity: 0.7;
        }
        .spinner {
            width: 18px; height: 18px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-top-color: #fff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { to { transform: rotate(360deg); } }

        .download-button, .copy-button {
            background: var(--surface-secondary);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.3s;
        }
        .download-button:hover, .copy-button:hover {
            background: var(--border-color);
        }

        /* === TABS === */
        .studio-tabs {
            display: flex;
            flex-wrap: wrap; /* Agar bisa turun ke bawah di mobile */
            gap: 0.5rem;
            margin-bottom: 2rem;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 1rem;
        }
        .tab-button {
            padding: 0.75rem 1.25rem;
            border: none;
            background: transparent;
            color: var(--text-secondary);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }
        .tab-button:hover {
            background: var(--surface-primary);
            color: var(--text-primary);
        }
        .tab-button.active {
            color: var(--accent-primary);
            border-bottom-color: var(--accent-primary);
        }
        .tab-content { display: none; }
        .tab-content.active { 
            display: block; 
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* === LAYOUT GRID === */
        .api-config-grid, .blueprint-grid, .control-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }
        .api-card h3 { font-size: 1rem; margin-bottom: 0.5rem; color: var(--text-primary); }

        /* === OUTPUT AREA === */
        .output-container { margin-top: 2rem; }
        .output-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        .output-header h2 { font-family: var(--font-header); font-size: 1.75rem; }
        .output-box {
            background: var(--surface-primary);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 1.5rem;
            min-height: 200px;
            transition: all 0.3s;
            overflow: auto; /* Agar bisa scroll jika konten panjang */
        }
        .placeholder-text {
            color: var(--text-secondary);
            text-align: center;
            font-style: italic;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        #novelOutput { white-space: pre-wrap; word-wrap: break-word; }
        #novelOutput:focus { outline: none; }

        /* === FITUR SPESIFIK === */
        /* COMIC STUDIO */
        #comicStripContainer { 
            min-height: 400px; 
            display: flex; 
            flex-direction: column; 
            gap: 1rem; 
            background-image: linear-gradient(45deg, #1f1f2b 25%, transparent 25%), linear-gradient(-45deg, #1f1f2b 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #1f1f2b 75%), linear-gradient(-45deg, transparent 75%, #1f1f2b 75%); 
            background-size: 20px 20px; 
        }
        .comic-panel-wrapper { 
            position: relative; 
            border: 2px solid var(--border-color);
            border-radius: 8px;
            overflow: hidden;
            background: var(--bg-deep-space);
        }
        .comic-panel-wrapper img { display: block; width: 100%; height: auto; }
        .dialogue-balloon { 
            position: absolute; 
            background: white; 
            color: black; 
            padding: 8px 12px; 
            border-radius: 15px; 
            border: 2px solid black; 
            font-family: 'Comic Sans MS', cursive; 
            cursor: move; 
            z-index: 10; 
            min-width: 100px;
            top: 20px; left: 20px;
        }
        .dialogue-balloon:focus { outline: 2px dashed var(--accent-primary); }

        /* AUDIO & FILM STUDIO */
        #sound-results audio { width: 100%; margin-top: 0.5rem; }
        #filmOutput video { max-width: 100%; border-radius: 8px; margin-top: 1rem; }

        /* === FOOTER === */
        .studio-footer { 
            text-align: center; 
            margin-top: 4rem; 
            padding: 2rem 1rem; 
            border-top: 1px solid var(--border-color); 
        }
        .studio-footer h3 { font-family: var(--font-header); font-size: 1.5rem; color: var(--accent-secondary); }
        .studio-footer p { color: var(--text-secondary); }
        .studio-footer a { color: var(--accent-tertiary); text-decoration: none; }
        .studio-footer a:hover { text-decoration: underline; }

        /* === RESPONSIVE DESIGN (MOBILE-FIRST) === */
        @media (max-width: 768px) {
            .studio-container { padding-top: 2rem; }
            .studio-header h1 { font-size: 2rem; }
            .api-config-grid, .blueprint-grid, .control-grid { grid-template-columns: 1fr; } /* Semua grid jadi 1 kolom */
            .output-header { flex-direction: column; align-items: flex-start; }
        }
    </style>
</head>
<body>
    <div class="studio-container">
        <header class="studio-header">
            <h1>Grand Creative Studio V9</h1>
            <p>The Responsive Pro Suite for Digital Creators</p>
        </header>
        
        <section class="card">
            <h3>API Keys Configuration</h3>
            <div class="api-config-grid">
                <div><h3>Stability AI</h3><input type="password" id="stabilityAIKey" placeholder="Untuk Comic & Cover"></div>
                <div><h3>OpenAI</h3><input type="password" id="openAIKey" placeholder="Untuk Novel"></div>
                <div><h3>ElevenLabs</h3><input type="password" id="elevenlabsAIKey" placeholder="Untuk Suara"></div>
                <div><h3>Replicate</h3><input type="password" id="replicateAIKey" placeholder="Untuk Film"></div>
                <div><h3>Pixabay</h3><input type="password" id="pixabayKey" placeholder="Untuk Musik & SFX"></div>
            </div>
        </section>

        <nav class="studio-tabs" style="margin-top: 2rem;">
            <button class="tab-button active" data-tab="novelStudio">Novel Studio</button>
            <button class="tab-button" data-tab="comicStudio">Comic Studio</button>
            <button class="tab-button" data-tab="audioStudio">Audio Studio</button>
            <button class="tab-button" data-tab="filmStudio">Film Studio</button>
        </nav>

        <!-- NOVEL STUDIO -->
        <div id="novelStudio" class="tab-content active">
            <div class="card">
                <h3>📝 Story Blueprint</h3>
                <div class="blueprint-grid">
                    <input type="text" id="novelAuthor" placeholder="Nama Author">
                    <select id="novelGenre"><option value="Fantasy">Fantasi</option><option value="Sci-Fi">Sci-Fi</option><option value="Horror">Horor</option><option value="Romance">Romansa</option></select>
                    <input type="text" id="novelCharacters" placeholder="Nama & Peran Tokoh Utama">
                    <input type="text" id="novelSetting" placeholder="Setting Waktu & Tempat">
                </div>
                <textarea id="novelConflict" rows="2" placeholder="Konflik Utama"></textarea>
                <textarea id="novelPlotTwist" rows="2" placeholder="Plot Twist yang Direncanakan"></textarea>
            </div>
            <div class="control-grid" style="margin-top:2rem;">
                <div class="card">
                    <h3>🚀 Generator Bab Profesional</h3>
                    <p style="color:var(--text-secondary); margin-bottom:1rem;">AI akan gunakan Blueprint untuk menghasilkan bab yang konsisten.</p>
                    <button id="generateNovelBtn" class="main-action-button"><span class="btn-text">Buat / Lanjutkan Bab</span></button>
                </div>
                <div class="card">
                    <h3>🎨 Cover Novel Generator</h3>
                    <input type="text" id="coverTitle" placeholder="Judul Novel">
                    <textarea id="coverVibe" rows="2" placeholder="Suasana cover (e.g., epic, minimalist, dark fantasy)"></textarea>
                    <button id="generateCoverBtn" class="main-action-button"><span class="btn-text">Buat Cover</span></button>
                </div>
            </div>
            <div class="output-container">
                <div class="output-header"><h2>Naskah & Cover</h2><div><button id="saveNovelPdf" class="download-button">Simpan PDF</button> <button class="copy-button" onclick="copyToClipboard('novelOutput', this)">Salin Teks</button></div></div>
                <div id="novelAndCoverOutput" class="output-box">
                    <div id="coverOutput" style="text-align:center; margin-bottom: 2rem;"></div>
                    <div id="novelOutput" contenteditable="true" spellcheck="false"><p class="placeholder-text">Naskah Anda akan muncul di sini...</p></div>
                </div>
            </div>
        </div>

        <!-- COMIC STUDIO -->
        <div id="comicStudio" class="tab-content">
            <div class="card">
                <h3>✏️ Comic Panel Creator</h3>
                <div class="control-grid">
                    <div>
                        <label>Prompt Deskripsi Panel</label>
                        <textarea id="comicPrompt" rows="4" placeholder="e.g., A detective looking at a clue on the floor, raining outside, moody lighting..."></textarea>
                    </div>
                    <div>
                        <label>Gaya Visual</label>
                        <select id="comicStyle"><option value="comic-book">Komik Amerika</option><option value="manga">Manga</option><option value="pixel-art">Pixel Art</option></select>
                        <button id="addPanelBtn" class="main-action-button" style="margin-top: 1.7rem;"><span class="btn-text">Tambah Panel</span></button>
                    </div>
                </div>
            </div>
            <div class="output-container">
                <div class="output-header"><h2>Comic Strip Builder</h2><button id="exportStripBtn" class="download-button">Ekspor Strip JPG</button></div>
                <div id="comicStripContainer" class="output-box">
                    <p class="placeholder-text">Panel komik Anda akan muncul di sini.</p>
                </div>
            </div>
        </div>
        
        <!-- AUDIO STUDIO -->
        <div id="audioStudio" class="tab-content">
            <div class="control-grid">
                <div class="card">
                    <h3>🎙️ Voice Over Generator</h3>
                    <label>Pilih Suara (ElevenLabs)</label>
                    <select id="elevenlabsVoice">
                        <option value="21m00Tcm4TlvDq8ikWAM">Rachel (Female, Calm)</option>
                        <option value="AZnzlk1XvdvUeBnXmlld">Adam (Male, Deep)</option>
                    </select>
                    <label>Teks untuk Suara</label>
                    <textarea id="ttsText" rows="4" placeholder="Ketik naskah di sini..."></textarea>
                    <button id="generateVoiceBtn" class="main-action-button"><span class="btn-text">Hasilkan Audio</span></button>
                </div>
                <div class="card">
                    <h3>🎵 Musik & SFX (Pixabay)</h3>
                    <label>Cari Musik atau Efek Suara</label>
                    <input type="text" id="soundSearchQuery" placeholder="e.g., epic cinematic, laser sound">
                    <button id="searchSoundBtn" class="main-action-button"><span class="btn-text">Cari Suara</span></button>
                </div>
            </div>
            <div class="output-container">
                 <div class="output-header"><h2>Hasil Audio</h2></div>
                 <div id="audioOutput" class="output-box">
                    <p class="placeholder-text">Audio yang dihasilkan atau ditemukan akan muncul di sini.</p>
                 </div>
            </div>
        </div>

        <!-- FILM STUDIO -->
        <div id="filmStudio" class="tab-content">
            <div class="card">
                <h3>🎬 AI Film Generator (Replicate)</h3>
                <div class="control-grid">
                     <div>
                        <label>Prompt Animasi (Text-to-Video)</label>
                        <textarea id="videoPrompt" rows="4" placeholder="e.g., An astronaut walking on a psychedelic planet..."></textarea>
                     </div>
                     <div>
                        <label>Atau Unggah Gambar Referensi (Image-to-Video)</label>
                        <input type="file" id="videoImageInput" accept="image/*" style="padding: 0.5rem; background: transparent; border: none;">
                        <p style="color:var(--text-secondary); font-size: 0.8rem;">Jika gambar diunggah, prompt teks akan diabaikan.</p>
                    </div>
                </div>
                <button id="generateVideoBtn" class="main-action-button"><span class="btn-text">Buat Film Pendek</span></button>
            </div>
            <div class="output-container">
                <div class="output-header"><h2>Hasil Video</h2></div>
                <div id="filmOutput" class="output-box">
                     <p class="placeholder-text">Video Anda akan muncul di sini setelah proses selesai.</p>
                </div>
            </div>
        </div>

        <footer class="studio-footer">
            <h3>Nabila Ahmad Studio Development</h3>
            <p>Untuk dukungan, konsultasi, atau aktivasi fitur premium, hubungi Admin via WhatsApp: <a href="https://wa.me/6285810526151" target="_blank">0858-1052-6151</a></p>
        </footer>
    </div>

<script>
// Load PDF libraries on demand
function loadScript(src) {
    return new Promise((resolve, reject) => {
        const script = document.createElement('script');
        script.src = src;
        script.onload = resolve;
        script.onerror = reject;
        document.head.appendChild(script);
    });
}

document.addEventListener('DOMContentLoaded', () => {
    console.log("Grand Creative Studio V9 (Responsive Pro) Initialized.");

    // === HELPER FUNCTIONS (PENTING!) ===

    /**
     * Menampilkan/Menyembunyikan status loading pada tombol.
     * @param {HTMLButtonElement} button - Tombol yang akan diubah.
     * @param {boolean} isLoading - True jika loading, false jika selesai.
     */
    function setLoading(button, isLoading) {
        if (isLoading) {
            button.disabled = true;
            button.innerHTML = `<div class="spinner"></div><span class="btn-text">Memproses...</span>`;
        } else {
            button.disabled = false;
            // Mengambil teks asli dari atribut data atau dari elemen .btn-text
            const originalText = button.querySelector('.btn-text').textContent;
            button.innerHTML = `<span class="btn-text">${originalText}</span>`;
        }
    }

    /**
     * Menghapus placeholder dari sebuah kontainer output.
     * @param {HTMLElement} container - Kontainer output.
     */
    function clearPlaceholder(container) {
        const placeholder = container.querySelector('.placeholder-text');
        if (placeholder) {
            placeholder.remove();
        }
    }
    
    /**
     * Menyalin teks ke clipboard.
     * @param {string} elementId - ID elemen yang teksnya akan disalin.
     * @param {HTMLElement} button - Tombol yang diklik.
     */
    window.copyToClipboard = (elementId, button) => {
        const content = document.getElementById(elementId).innerText;
        navigator.clipboard.writeText(content).then(() => {
            const originalText = button.innerHTML;
            button.innerHTML = 'Tersalin!';
            setTimeout(() => { button.innerHTML = originalText; }, 2000);
        }).catch(err => {
            console.error('Gagal menyalin:', err);
            alert('Gagal menyalin teks.');
        });
    }

    // === LOGIKA TAB SWITCHING (FIXED) ===
    const tabButtons = document.querySelectorAll('.tab-button');
    const tabContents = document.querySelectorAll('.tab-content');

    tabButtons.forEach(button => {
        button.addEventListener('click', () => {
            // Hapus kelas 'active' dari semua tombol dan konten
            tabButtons.forEach(btn => btn.classList.remove('active'));
            tabContents.forEach(content => content.classList.remove('active'));
            
            // Tambah kelas 'active' ke tombol yang diklik dan konten yang sesuai
            button.classList.add('active');
            document.getElementById(button.dataset.tab).classList.add('active');
        });
    });

    // === NOVEL STUDIO LOGIC (IMPROVED) ===
    const generateNovelBtn = document.getElementById('generateNovelBtn');
    const novelOutput = document.getElementById('novelOutput');
    
    generateNovelBtn.addEventListener('click', async (e) => {
        setLoading(e.currentTarget, true);
        clearPlaceholder(novelOutput);
        
        // SIMULASI PANGGILAN API
        await new Promise(resolve => setTimeout(resolve, 2500)); 
        
        const existingText = novelOutput.innerText.replace("Naskah Anda akan muncul di sini...", "").trim();
        const newChapter = `
### BAB ${existingText ? 'BERIKUTNYA' : '1'} - AWAL YANG BARU

Paragraf pertama bab baru yang dihasilkan oleh AI, mengikuti blueprint yang telah Anda berikan. AI akan mengembangkan cerita dengan detail, menjaga konsistensi karakter dan plot. Dialog akan dibuat terasa alami dan deskripsi akan membangun suasana yang imersif sesuai genre yang dipilih.

Setiap kali Anda menekan tombol ini, AI akan melanjutkan cerita dari titik terakhir, memastikan alur yang berkelanjutan dan logis, sambil mengintegrasikan potensi plot twist yang sudah direncanakan.
        `;
        novelOutput.innerText += (existingText ? '\n\n' : '') + newChapter.trim();
        setLoading(e.currentTarget, false);
    });

    const generateCoverBtn = document.getElementById('generateCoverBtn');
    const coverOutput = document.getElementById('coverOutput');
    
    generateCoverBtn.addEventListener('click', async (e) => {
        setLoading(e.currentTarget, true);
        clearPlaceholder(coverOutput);
        
        // SIMULASI PANGGILAN API GAMBAR
        await new Promise(resolve => setTimeout(resolve, 3000));
        
        const title = document.getElementById('coverTitle').value || "Judul Misterius";
        coverOutput.innerHTML = `<img src="https://via.placeholder.com/400x600.png/191924/FFFFFF?text=${encodeURIComponent(title)}" alt="Cover Novel" style="max-width: 100%; border-radius: 8px;">`;
        setLoading(e.currentTarget, false);
    });
    
    document.getElementById('saveNovelPdf').addEventListener('click', async (e) => {
        const button = e.currentTarget;
        const originalText = button.innerHTML;
        button.innerHTML = 'Memuat library...';
        button.disabled = true;

        try {
            // Load library hanya saat dibutuhkan
            if (typeof window.jspdf === 'undefined') {
                await loadScript('https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js');
            }
            window.jsPDF = window.jspdf.jsPDF;
            
            button.innerHTML = 'Membuat PDF...';
            const doc = new jsPDF();
            const novelContent = document.getElementById('novelOutput').innerText;
            
            // Logika untuk handle teks panjang dan halaman baru
            const textLines = doc.splitTextToSize(novelContent, 180); // 180mm width
            doc.text(textLines, 15, 20);

            doc.save('novel_gcs_v9.pdf');
        } catch (error) {
            console.error("Gagal membuat PDF:", error);
            alert("Gagal membuat PDF. Cek koneksi internet.");
        } finally {
            button.innerHTML = originalText;
            button.disabled = false;
        }
    });

    // === COMIC STUDIO LOGIC (IMPROVED WITH DRAG & DROP) ===
    const addPanelBtn = document.getElementById('addPanelBtn');
    const comicStripContainer = document.getElementById('comicStripContainer');

    addPanelBtn.addEventListener('click', async (e) => {
        setLoading(e.currentTarget, true);
        clearPlaceholder(comicStripContainer);
        
        // SIMULASI API GAMBAR
        await new Promise(resolve => setTimeout(resolve, 3000));
        const imageUrl = `https://picsum.photos/512/512?random=${Math.random()}`; // Gambar acak
        
        const panelWrapper = document.createElement('div');
        panelWrapper.className = 'comic-panel-wrapper';
        panelWrapper.innerHTML = `
            <img src="${imageUrl}" alt="Comic Panel">
            <div class="dialogue-balloon" contenteditable="true" spellcheck="false">Dialog...</div>
        `;
        comicStripContainer.appendChild(panelWrapper);
        makeDraggable(panelWrapper.querySelector('.dialogue-balloon'));
        
        setLoading(e.currentTarget, false);
    });

    function makeDraggable(element) {
        let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
        element.onmousedown = dragMouseDown;

        function dragMouseDown(e) {
            e.preventDefault();
            pos3 = e.clientX;
            pos4 = e.clientY;
            document.onmouseup = closeDragElement;
            document.onmousemove = elementDrag;
        }

        function elementDrag(e) {
            e.preventDefault();
            pos1 = pos3 - e.clientX;
            pos2 = pos4 - e.clientY;
            pos3 = e.clientX;
            pos4 = e.clientY;
            element.style.top = (element.offsetTop - pos2) + "px";
            element.style.left = (element.offsetLeft - pos1) + "px";
        }

        function closeDragElement() {
            document.onmouseup = null;
            document.onmousemove = null;
        }
    }

    // === AUDIO & FILM STUDIO LOGIC (IMPLEMENTED) ===
    const searchSoundBtn = document.getElementById('searchSoundBtn');
    const generateVoiceBtn = document.getElementById('generateVoiceBtn');
    const generateVideoBtn = document.getElementById('generateVideoBtn');
    const audioOutput = document.getElementById('audioOutput');
    const filmOutput = document.getElementById('filmOutput');

    searchSoundBtn.addEventListener('click', async (e) => {
        setLoading(e.currentTarget, true);
        clearPlaceholder(audioOutput);

        await new Promise(resolve => setTimeout(resolve, 2000));
        // SIMULASI HASIL PENCARIAN DARI PIXABAY
        audioOutput.innerHTML = `
            <p>Hasil untuk: "${document.getElementById('soundSearchQuery').value}"</p>
            <audio controls src="https://cdn.pixabay.com/audio/2022/11/23/audio_755a73497c.mp3"></audio>
            <p style="font-size:0.8rem; color: var(--text-secondary);">Ini adalah contoh audio. Integrasi nyata memerlukan panggilan API Pixabay.</p>
        `;
        setLoading(e.currentTarget, false);
    });
    
    generateVoiceBtn.addEventListener('click', async (e) => {
        setLoading(e.currentTarget, true);
        clearPlaceholder(audioOutput);
        
        await new Promise(resolve => setTimeout(resolve, 3000));
        // SIMULASI HASIL DARI ELEVENLABS
        audioOutput.innerHTML = `
            <p>Voice Over dari naskah:</p>
            <audio controls src="https://cdn.pixabay.com/audio/2022/11/23/audio_755a73497c.mp3"></audio>
            <p style="font-size:0.8rem; color: var(--text-secondary);">Audio placeholder. Integrasi nyata memerlukan panggilan API ElevenLabs.</p>
        `;
        setLoading(e.currentTarget, false);
    });

    generateVideoBtn.addEventListener('click', async (e) => {
        setLoading(e.currentTarget, true);
        clearPlaceholder(filmOutput);

        await new Promise(resolve => setTimeout(resolve, 5000)); // Proses video lebih lama
        // SIMULASI HASIL VIDEO DARI REPLICATE
        filmOutput.innerHTML = `
            <video controls autoplay loop muted>
                <source src="https://assets.mixkit.co/videos/preview/mixkit-animation-of-a-flock-of-bats-in-a-cave-34083-large.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
            <p style="font-size:0.8rem; color: var(--text-secondary);">Video placeholder. Integrasi nyata memerlukan panggilan API Replicate.</p>
        `;
        setLoading(e.currentTarget, false);
    });

});
</script>

</body>
</html>
